
--

-- 
-- TABLE: ARTIST 
--

CREATE TABLE ARTIST(
    ARTIST_KEY               NUMBER(6, 0)   GENERATED BY DEFAULT AS IDENTITY   NOT NULL,
    ARTIST_NAME              VARCHAR2(100)    NOT NULL UNIQUE,
    CREATED_USER             VARCHAR2(100)    NOT NULL,
    CREATED_DATETIME         TIMESTAMP(6)     NOT NULL,
    LAST_UPDATED_USER        VARCHAR2(100),
    LAST_UPDATED_DATETIME    TIMESTAMP(6),
    CONSTRAINT PK_ARTIST PRIMARY KEY (ARTIST_KEY)
)
;



-- 
-- TABLE: ARTIST_ROLE 
--

CREATE TABLE ARTIST_ROLE(
    ARTIST_ROLE_KEY          NUMBER(6, 0)   GENERATED BY DEFAULT AS IDENTITY   NOT NULL,
    ARTIST_KEY               NUMBER(6, 0)     NOT NULL,
    ROLE_KEY                 NUMBER(5, 0)     NOT NULL,
    CREATED_USER             VARCHAR2(100)    NOT NULL,
    CREATED_DATETIME         TIMESTAMP(6)     NOT NULL,
    LAST_UPDATED_USER        VARCHAR2(100),
    LAST_UPDATED_DATETIME    TIMESTAMP(6),
    CONSTRAINT PK_ARTIST_ROLE PRIMARY KEY (ARTIST_ROLE_KEY)
)
;



-- 
-- TABLE: COMPILATION 
--

CREATE TABLE COMPILATION(
    COMPILATION_KEY          NUMBER(10, 0)  GENERATED BY DEFAULT AS IDENTITY   NOT NULL,
    COMPILATION_NAME         VARCHAR2(100)          NOT NULL,
    COMPILATION_DATE         DATE             NOT NULL,
    COMPILATION_DURATION     NUMBER(10, 0)    NOT NULL,
    CREATED_USER             VARCHAR2(100)    NOT NULL,
    CREATED_DATETIME         TIMESTAMP(6)     NOT NULL,
    LAST_UPDATED_USER        VARCHAR2(100),
    LAST_UPDATED_DATETIME    TIMESTAMP(6),
    CONSTRAINT PK_COMPILATION PRIMARY KEY (COMPILATION_KEY)
)
;



-- 
-- TABLE: COMPILATION_ARTIST_ROLE 
--

CREATE TABLE COMPILATION_ARTIST_ROLE(
    COMPILATION_ARTIST_ROLE_KEY    NUMBER(10, 0)  GENERATED BY DEFAULT AS IDENTITY  NOT NULL,
    COMPILATION_KEY                NUMBER(10, 0)    NOT NULL,
    ARTIST_ROLE_KEY                NUMBER(6, 0)     NOT NULL,
    CREATED_USER                   VARCHAR2(100)    NOT NULL,
    CREATED_DATETIME               TIMESTAMP(6)     NOT NULL,
    LAST_UPDATED_USER              VARCHAR2(100),
    LAST_UPDATED_DATETIME          TIMESTAMP(6),
    CONSTRAINT PK_COMPILATION_ARTIST_ROLE PRIMARY KEY (COMPILATION_ARTIST_ROLE_KEY)
)
;



-- 
-- TABLE: COMPILATION_COMPONENT 
--

CREATE TABLE COMPILATION_COMPONENT(
    COMPILATION_COMPONENT_KEY         NUMBER(10, 0)  GENERATED BY DEFAULT AS IDENTITY   NOT NULL,
    COMPONENT_TYPE                    VARCHAR2(15)     NOT NULL,
    PARENT_COMPILATION_KEY            NUMBER(10, 0)    NOT NULL,
    RECORDING_KEY                     NUMBER(10, 0),
    COMPILATION_KEY                   NUMBER(10, 0),
    COMPILATION_COMPONENT_OFFSET      NUMBER(10, 0)    NOT NULL,
    COMPILATION_COMPONENT_DURATION    NUMBER(10, 0)    NOT NULL,
    COMPONENT_OFFSET                  NUMBER(10, 0)    NOT NULL,
    COMPONENT_DURATION                NUMBER(10, 0)    NOT NULL,
    CREATED_USER                      VARCHAR2(100)    NOT NULL,
    CREATED_DATETIME                  TIMESTAMP(6)     NOT NULL,
    LAST_UPDATED_USER                 VARCHAR2(100),
    LAST_UPDATED_DATETIME             TIMESTAMP(6),
    CONSTRAINT PK_COMPILATION_COMPONENT PRIMARY KEY (COMPILATION_COMPONENT_KEY)
)
;



-- 
-- TABLE: DISTRIBUTION 
--

CREATE TABLE DISTRIBUTION(
    DISTRIBUTION_KEY         NUMBER(10, 0)   GENERATED BY DEFAULT AS IDENTITY  NOT NULL,
    DISTRIBUTION_NAME        VARCHAR2(100)     NOT NULL UNIQUE,
    DISTRIBUTION_TYPE        VARCHAR2(15)     NOT NULL,
    CREATED_USER             VARCHAR2(100)    NOT NULL,
    CREATED_DATETIME         TIMESTAMP(6)     NOT NULL,
    LAST_UPDATED_USER        VARCHAR2(100),
    LAST_UPDATED_DATETIME    TIMESTAMP(6),
    CONSTRAINT PK_DISTRIBUTION PRIMARY KEY (DISTRIBUTION_KEY)
)
;



-- 
-- TABLE: DISTRIBUTION_COMPILATION 
--

CREATE TABLE DISTRIBUTION_COMPILATION(
    DISTRIBUTION_COMPILATION_KEY    NUMBER(10, 0)   GENERATED BY DEFAULT AS IDENTITY  NOT NULL,
    DISTRIBUTION_KEY                NUMBER(10, 0)    NOT NULL,
    COMPILATION_KEY                 NUMBER(10, 0)    NOT NULL,
    CREATED_USER                    VARCHAR2(100)    NOT NULL,
    CREATED_DATETIME                TIMESTAMP(6)     NOT NULL,
    LAST_UPDATED_USER               VARCHAR2(100),
    LAST_UPDATED_DATETIME           TIMESTAMP(6),
    CONSTRAINT PK_DISTRIBUTION_COMPILATION PRIMARY KEY (DISTRIBUTION_COMPILATION_KEY)
)
;



-- 
-- TABLE: DISTRIBUTION_RELEASE 
--

CREATE TABLE DISTRIBUTION_RELEASE(
    DISTRIBUTION_RELEASE_KEY     NUMBER(10, 0)  GENERATED BY DEFAULT AS IDENTITY   NOT NULL,
    DISTRIBUTION_KEY             NUMBER(10, 0)    NOT NULL,
    DISTRIBUTION_RELEASE_DATE    DATE             NOT NULL,
    DISTRIBUTION_LABEL           VARCHAR2(100)    NOT NULL,
    DISTRIBUTION_MARKET          VARCHAR2(100)    NOT NULL,
    CREATED_USER                 VARCHAR2(100)    NOT NULL,
    CREATED_DATETIME             TIMESTAMP(6)     NOT NULL,
    LAST_UPDATED_USER            VARCHAR2(100),
    LAST_UPDATED_DATETIME        TIMESTAMP(6),
    CONSTRAINT PK_DISTRIBUTION_RELEASE PRIMARY KEY (DISTRIBUTION_RELEASE_KEY)
)
;






-- 
-- TABLE: RECORDING 
--

CREATE TABLE RECORDING(
    RECORDING_KEY            NUMBER(10, 0)   GENERATED BY DEFAULT AS IDENTITY  NOT NULL,
    RECORDING_ID	     VARCHAR2(20)    NOT NULL UNIQUE, 
    RECORDING_DATE           DATE             NOT NULL,
    RECORDING_DURATION       NUMBER(10, 0)    NOT NULL,
    CREATED_USER             VARCHAR2(100)    NOT NULL,
    CREATED_DATETIME         TIMESTAMP(6)     NOT NULL,
    LAST_UPDATED_USER        VARCHAR2(100),
    LAST_UPDATED_DATETIME    TIMESTAMP(6),
    CONSTRAINT PK_RECORDING PRIMARY KEY (RECORDING_KEY)
)
;





-- 
-- TABLE: RECORDING_ARTIST_ROLE 
--

CREATE TABLE RECORDING_ARTIST_ROLE(
    RECORDING_ARTIST_ROLE_KEY    NUMBER(10, 0)   GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    RECORDING_KEY                NUMBER(10, 0)    NOT NULL,
    ARTIST_ROLE_KEY              NUMBER(6, 0)     NOT NULL,
    CREATED_USER                 VARCHAR2(100)    NOT NULL,
    CREATED_DATETIME             TIMESTAMP(6)     NOT NULL,
    LAST_UPDATED_USER            VARCHAR2(100),
    LAST_UPDATED_DATETIME        TIMESTAMP(6),
    CONSTRAINT PK_RECORDING_ARTIST_ROLE PRIMARY KEY (RECORDING_ARTIST_ROLE_KEY)
)
;



-- 
-- TABLE: ROLE 
--

CREATE TABLE ROLE(
    ROLE_KEY                 NUMBER(5, 0)    GENERATED BY DEFAULT AS IDENTITY  NOT NULL,
    ROLE_NAME                VARCHAR2(100)    NOT NULL UNIQUE,
    CREATED_USER               VARCHAR2(100)    NOT NULL,
    CREATED_DATETIME         TIMESTAMP(6)     NOT NULL,
    LAST_UPDATED_USER        VARCHAR2(100),
    LAST_UPDATED_DATETIME    TIMESTAMP(6),
    CONSTRAINT PK_ROLE PRIMARY KEY (ROLE_KEY)
)
;





-- FOREIGN KEY CONSTRAINTS
-- 
-- TABLE: ARTIST_ROLE 
--

ALTER TABLE ARTIST_ROLE ADD CONSTRAINT FK_ARTIST3 
    FOREIGN KEY (ARTIST_KEY)
    REFERENCES ARTIST(ARTIST_KEY)
;

ALTER TABLE ARTIST_ROLE ADD CONSTRAINT FK_ROLE4 
    FOREIGN KEY (ROLE_KEY)
    REFERENCES ROLE(ROLE_KEY)
;


-- 
-- TABLE: COMPILATION_ARTIST_ROLE 
--

ALTER TABLE COMPILATION_ARTIST_ROLE ADD CONSTRAINT FK_COMPILATION9 
    FOREIGN KEY (COMPILATION_KEY)
    REFERENCES COMPILATION(COMPILATION_KEY)
;

ALTER TABLE COMPILATION_ARTIST_ROLE ADD CONSTRAINT FK_ARTIST_ROLE10 
    FOREIGN KEY (ARTIST_ROLE_KEY)
    REFERENCES ARTIST_ROLE(ARTIST_ROLE_KEY)
;


-- 
-- TABLE: COMPILATION_COMPONENT 
--

ALTER TABLE COMPILATION_COMPONENT ADD CONSTRAINT FK_COMPILATION21 
    FOREIGN KEY (PARENT_COMPILATION_KEY)
    REFERENCES COMPILATION(COMPILATION_KEY)
;

ALTER TABLE COMPILATION_COMPONENT ADD CONSTRAINT FK_RECORDING11 
    FOREIGN KEY (RECORDING_KEY)
    REFERENCES RECORDING(RECORDING_KEY)
;

ALTER TABLE COMPILATION_COMPONENT ADD CONSTRAINT FK_COMPILATION12 
    FOREIGN KEY (COMPILATION_KEY)
    REFERENCES COMPILATION(COMPILATION_KEY)
;


-- 
-- TABLE: DISTRIBUTION_COMPILATION 
--

ALTER TABLE DISTRIBUTION_COMPILATION ADD CONSTRAINT FK_COMPILATION13 
    FOREIGN KEY (COMPILATION_KEY)
    REFERENCES COMPILATION(COMPILATION_KEY)
;

ALTER TABLE DISTRIBUTION_COMPILATION ADD CONSTRAINT FK_DISTRIBUTION22 
    FOREIGN KEY (DISTRIBUTION_KEY)
    REFERENCES DISTRIBUTION(DISTRIBUTION_KEY)
;


-- 
-- TABLE: DISTRIBUTION_RELEASE 
--

ALTER TABLE DISTRIBUTION_RELEASE ADD CONSTRAINT FK_DISTRIBUTION18 
    FOREIGN KEY (DISTRIBUTION_KEY)
    REFERENCES DISTRIBUTION(DISTRIBUTION_KEY)
;



-- 
-- TABLE: RECORDING_ARTIST_ROLE 
--

ALTER TABLE RECORDING_ARTIST_ROLE ADD CONSTRAINT FK_RECORDING5 
    FOREIGN KEY (RECORDING_KEY)
    REFERENCES RECORDING(RECORDING_KEY)
;

ALTER TABLE RECORDING_ARTIST_ROLE ADD CONSTRAINT FK_ARTIST_ROLE6 
    FOREIGN KEY (ARTIST_ROLE_KEY)
    REFERENCES ARTIST_ROLE(ARTIST_ROLE_KEY)
;

--UNIQUE INDEXES FOR COMBINATION OF COLUMNS


CREATE UNIQUE INDEX UNQ_ARTIST_ROLE ON ARTIST_ROLE (ARTIST_KEY, ROLE_KEY) ;

CREATE UNIQUE INDEX UNQ_RECORDING_ARTIST_ROLE ON RECORDING_ARTIST_ROLE (RECORDING_KEY, ARTIST_ROLE_KEY);

CREATE UNIQUE INDEX UNQ_COMPILATION_COMPONENT1 ON COMPILATION_COMPONENT (PARENT_COMPILATION_KEY, COMPILATION_KEY); 

CREATE UNIQUE INDEX UNQ_COMPILATION_COMPONENT2 ON COMPILATION_COMPONENT (PARENT_COMPILATION_KEY, RECORDING_KEY); 

CREATE UNIQUE INDEX UNQ_COMPILATION_ARTIST_ROLE ON COMPILATION_ARTIST_ROLE (COMPILATION_KEY, ARTIST_ROLE_KEY) ;

CREATE UNIQUE INDEX UNQ_DISTRIBUTION_COMPILATION ON DISTRIBUTION_COMPILATION (DISTRIBUTION_KEY, COMPILATION_KEY);

CREATE UNIQUE INDEX UNQ_COMPILATION_NAME ON COMPILATION (COMPILATION_NAME); 

 



